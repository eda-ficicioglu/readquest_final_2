{% extends "_base.html" %}

{% block title %}Book Recommendations for {{ reader_type }}{% endblock %}

{% block content %}
    <h1>"{{ reader_type }}" Book Recommendations</h1>

    {% if books %}
        {% for book in books %}
        <div class="book-card" style="overflow: hidden; margin-bottom: 20px; border-bottom: 1px solid #ccc; padding-bottom: 20px;">
            {% if book.thumbnail %}
            <div class="book-cover" style="float: left; margin-right: 20px;">
                <img src="{{ book.thumbnail }}" alt="{{ book.title }} Cover" style="width: 150px;">
            </div>
            {% endif %}
            <div class="book-details">
                <h3>{{ book.title }}</h3>
                <p><strong>Author:</strong> {{ book.author }}</p>
                <p><strong>Description:</strong> {{ book.description|truncate(300, True) if book.description else 'Description not available.' }}</p>
                
                <form action="{{ url_for('main.save_book') }}" method="post" style="margin-top: 10px;">
                    <input type="hidden" name="book_id" value="{{ book.id }}">
                    <input type="hidden" name="title" value="{{ book.title }}">
                    <input type="hidden" name="author" value="{{ book.author }}">
                    <input type="hidden" name="thumbnail" value="{{ book.thumbnail or '' }}">
                    <button type="submit">Save to My List</button>
                </form>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="no-books">
            <p>Unfortunately, book recommendations could not be made for this reader type.</p>
        </div>
    {% endif %}

    <div class="actions">
        <a href="{{ url_for('main.quiz') }}">Take the test again</a>
    </div>
{% endblock %}